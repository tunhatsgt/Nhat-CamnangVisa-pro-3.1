<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Cáº©m nang Visa - HÆ°á»›ng dáº«n chi tiáº¿t vá» cÃ¡c loáº¡i visa, thá»§ tá»¥c vÃ  kinh nghiá»‡m xin visa cÃ¡c nÆ°á»›c">
    <meta name="keywords" content="visa, thá»§ tá»¥c visa">
    <meta name="author" content="Visa Guide Team">
    <meta name="theme-color" content="#1976d2">
    
    <title>âš™ï¸ CÃ i Ä‘áº·t á»©ng dá»¥ng Visa</title>
    
    <!-- PWA Manifest - Fixed path -->
    <link rel="manifest" href="./github/manifest.json">
    
    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="192x192" href="./github/icons/icon-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="./github/icons/icon-512x512.png">
    <link rel="apple-touch-icon" href="./github/icons/icon-192x192.png">
    
<style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .container {
      background: white;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      padding: 40px;
      max-width: 500px;
      width: 100%;
      text-align: center;
      animation: slideIn 0.5s ease-out;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(-30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .icon {
      font-size: 80px;
      margin-bottom: 20px;
      animation: bounce 2s infinite;
    }

    @keyframes bounce {
      0%, 100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-10px);
      }
    }

    h1 {
      color: #333;
      margin-bottom: 15px;
      font-size: 28px;
    }

    .description {
      color: #666;
      margin-bottom: 30px;
      line-height: 1.6;
    }

    .features {
      background: #f7f9fc;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 30px;
      text-align: left;
    }

    .feature-item {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
      color: #555;
    }

    .feature-item:last-child {
      margin-bottom: 0;
    }

    .feature-icon {
      font-size: 24px;
      margin-right: 15px;
      flex-shrink: 0;
    }

    .install-btn {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 15px 40px;
      font-size: 18px;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
      display: inline-flex;
      align-items: center;
      gap: 10px;
    }

    .install-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 15px 40px rgba(102, 126, 234, 0.5);
    }

    .install-btn:active {
      transform: translateY(0);
    }

    .install-btn.hidden {
      display: none;
    }

    .status-message {
      margin-top: 20px;
      padding: 15px;
      border-radius: 10px;
      display: none;
      font-size: 15px;
      line-height: 1.6;
    }

    .status-message.success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
      display: block;
    }

    .status-message.info {
      background: #d1ecf1;
      color: #0c5460;
      border: 1px solid #bee5eb;
      display: block;
    }

    .loading {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .footer {
      margin-top: 30px;
      color: #999;
      font-size: 14px;
    }

    @media (max-width: 600px) {
      .container {
        padding: 30px 20px;
      }

      h1 {
        font-size: 24px;
      }

      .install-btn {
        padding: 12px 30px;
        font-size: 16px;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="icon">ğŸ“±</div>
    <h1>CÃ i Ä‘áº·t á»©ng dá»¥ng Visa</h1>
    <p class="description">
      CÃ i Ä‘áº·t á»©ng dá»¥ng <strong>Cáº©m nang Visa</strong> Ä‘á»ƒ truy cáº­p nhanh vÃ  sá»­ dá»¥ng offline.
    </p>

    <div class="features">
      <div class="feature-item"><span class="feature-icon">âœ¨</span><span>Truy cáº­p nhanh tá»« mÃ n hÃ¬nh chÃ­nh</span></div>
      <div class="feature-item"><span class="feature-icon">ğŸ“´</span><span>Hoáº¡t Ä‘á»™ng offline</span></div>
      <div class="feature-item"><span class="feature-icon">ğŸ””</span><span>Nháº­n thÃ´ng bÃ¡o cáº­p nháº­t</span></div>
      <div class="feature-item"><span class="feature-icon">âš¡</span><span>Táº£i trang nhanh hÆ¡n</span></div>
    </div>

    <button id="installBtn" class="install-btn hidden">
      <span>ğŸ“²</span>
      <span>CÃ i Ä‘áº·t á»©ng dá»¥ng</span>
    </button>

    <div id="statusMessage" class="status-message"></div>

    <div class="footer">
      <p>PhiÃªn báº£n 3.1 | Â© Cáº©m nang Visa</p>
    </div>
  </div>

  <script>
    let deferredPrompt;
    const installBtn = document.getElementById("installBtn");
    const statusMessage = document.getElementById("statusMessage");

    function showStatus(message, type = "info") {
      statusMessage.innerHTML = message;
      statusMessage.className = `status-message ${type}`;
    }

    function detectPlatform() {
      const ua = navigator.userAgent.toLowerCase();
      if (/iphone|ipad|ipod/.test(ua)) return "ios";
      if (/android/.test(ua)) return "android";
      if (/windows/.test(ua)) return "windows";
      if (/mac/.test(ua)) return "macos";
      return "desktop";
    }

    function showPlatformInstructions(platform) {
      const instructions = {
        ios: `
          <strong>ğŸ“± CÃ i Ä‘áº·t trÃªn iPhone/iPad:</strong><br><br>
          1. Nháº¥n nÃºt <strong>Chia sáº»</strong> â¬†ï¸ (á»Ÿ thanh dÆ°á»›i)<br>
          2. Chá»n <strong>"ThÃªm vÃ o MÃ n hÃ¬nh chÃ­nh"</strong><br>
          3. Nháº¥n <strong>"ThÃªm"</strong> Ä‘á»ƒ hoÃ n táº¥t.<br><br>
          Icon sáº½ xuáº¥t hiá»‡n trÃªn mÃ n hÃ¬nh chÃ­nh.
        `,
        android: `
          <strong>ğŸ“± CÃ i Ä‘áº·t trÃªn Android:</strong><br><br>
          1. Nháº¥n biá»ƒu tÆ°á»£ng <strong>â‹®</strong> (Menu) gÃ³c pháº£i trÃªn<br>
          2. Chá»n <strong>"ThÃªm vÃ o mÃ n hÃ¬nh chÃ­nh"</strong><br>
          3. Hoáº·c <strong>"CÃ i Ä‘áº·t á»©ng dá»¥ng"</strong><br><br>
          á»¨ng dá»¥ng sáº½ hoáº¡t Ä‘á»™ng nhÆ° app tháº­t!
        `,
        windows: `
          <strong>ğŸ’» CÃ i Ä‘áº·t trÃªn Windows:</strong><br><br>
          1. Nháº¥n biá»ƒu tÆ°á»£ng <strong>âŠ• CÃ i Ä‘áº·t</strong> trÃªn thanh Ä‘á»‹a chá»‰<br>
          2. Hoáº·c Menu (â‹®) â†’ <strong>"CÃ i Ä‘áº·t Nháº­t-Visa..."</strong><br>
          3. Nháº¥n <strong>"CÃ i Ä‘áº·t"</strong><br><br>
          App sáº½ cháº¡y nhÆ° pháº§n má»m desktop riÃªng!
        `,
        macos: `
          <strong>ğŸ’» CÃ i Ä‘áº·t trÃªn macOS:</strong><br><br>
          TrÃªn Chrome/Edge:<br>
          1. Nháº¥n biá»ƒu tÆ°á»£ng <strong>âŠ• CÃ i Ä‘áº·t</strong> trÃªn thanh Ä‘á»‹a chá»‰<br>
          2. Hoáº·c Menu â†’ <strong>"CÃ i Ä‘áº·t Nháº­t-Visa..."</strong><br><br>
          TrÃªn Safari:<br>
          File â†’ <strong>ThÃªm vÃ o Dock</strong>
        `,
        desktop: `
          <strong>ğŸ’» CÃ i Ä‘áº·t trÃªn mÃ¡y tÃ­nh:</strong><br><br>
          1. Nháº¥n biá»ƒu tÆ°á»£ng <strong>âŠ• CÃ i Ä‘áº·t</strong> trÃªn thanh Ä‘á»‹a chá»‰<br>
          2. Hoáº·c vÃ o Menu trÃ¬nh duyá»‡t â†’ <strong>"CÃ i Ä‘áº·t"</strong><br><br>
          á»¨ng dá»¥ng sáº½ má»Ÿ trong cá»­a sá»• riÃªng!
        `
      };
      showStatus(instructions[platform] || "HÆ°á»›ng dáº«n cÃ i Ä‘áº·t khÃ´ng xÃ¡c Ä‘á»‹nh.", "info");
    }

    // âœ… Náº¿u app Ä‘Ã£ cÃ i Ä‘áº·t
    if (window.matchMedia("(display-mode: standalone)").matches) {
      installBtn.classList.add("hidden");
      showStatus("âœ… á»¨ng dá»¥ng Ä‘Ã£ Ä‘Æ°á»£c cÃ i Ä‘áº·t!", "success");
    }

    // âœ… Sá»± kiá»‡n beforeinstallprompt
    window.addEventListener("beforeinstallprompt", (e) => {
      e.preventDefault();
      deferredPrompt = e;
      installBtn.classList.remove("hidden");
    });

    // âœ… Khi báº¥m nÃºt CÃ i Ä‘áº·t
    installBtn.addEventListener("click", async () => {
      if (!deferredPrompt) {
        const platform = detectPlatform();
        showPlatformInstructions(platform);
        return;
      }

      installBtn.innerHTML = '<div class="loading"></div><span>Äang cÃ i Ä‘áº·t...</span>';
      installBtn.disabled = true;

      try {
        deferredPrompt.prompt();
        const { outcome } = await deferredPrompt.userChoice;

        if (outcome === "accepted") {
          showStatus("âœ… CÃ i Ä‘áº·t thÃ nh cÃ´ng!", "success");
          installBtn.classList.add("hidden");
        } else {
          showStatus("â„¹ï¸ Báº¡n Ä‘Ã£ há»§y cÃ i Ä‘áº·t. CÃ³ thá»ƒ thá»­ láº¡i báº¥t cá»© lÃºc nÃ o!", "info");
          installBtn.innerHTML = "<span>ğŸ“²</span><span>CÃ i Ä‘áº·t á»©ng dá»¥ng</span>";
          installBtn.disabled = false;
        }
      } catch (error) {
        console.error("Lá»—i khi cÃ i Ä‘áº·t:", error);
        showStatus("âŒ CÃ³ lá»—i xáº£y ra khi cÃ i Ä‘áº·t. Vui lÃ²ng thá»­ láº¡i!", "info");
        installBtn.innerHTML = "<span>ğŸ“²</span><span>CÃ i Ä‘áº·t á»©ng dá»¥ng</span>";
        installBtn.disabled = false;
      }

      deferredPrompt = null;
    });

    // âœ… Khi app Ä‘Æ°á»£c cÃ i Ä‘áº·t thÃ nh cÃ´ng
    window.addEventListener("appinstalled", () => {
      showStatus("âœ… á»¨ng dá»¥ng Ä‘Ã£ Ä‘Æ°á»£c cÃ i Ä‘áº·t!", "success");
      installBtn.classList.add("hidden");
      deferredPrompt = null;
    });

    // âœ… ÄÄƒng kÃ½ Service Worker
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", async () => {
        try {
          const reg = await navigator.serviceWorker.register("sw.js");
          console.log("Service Worker registered:", reg.scope);
        } catch (err) {
          console.error("Service Worker registration failed:", err);
        }
      });
    }

    // âœ… HÆ°á»›ng dáº«n iOS fallback
    window.addEventListener("load", () => {
      const platform = detectPlatform();
      if (platform === "ios" && !window.matchMedia("(display-mode: standalone)").matches) {
        showPlatformInstructions("ios");
        installBtn.classList.add("hidden");
      }
    });
  </script>
</body>
</html>

